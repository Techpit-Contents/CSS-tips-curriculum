とりあえず読めるようにするためにここにファイルを置く


# [お気持ち]はじめに
CSSについて自分の経験とかを書き溜めたくなったのでここに記す。

## 個人的なCSSに関する雑感
CSSの学習は大変むずかしいと思っている。なぜなら、とにかく覚えるところから始めなければならない。CSSのシンタックスそのものは非常にシンプルだ。しかし、とにかく表現できることが多く、またそのために対応したプロパティと値を覚えていかなければならない。このプロパティを覚えなければならないというのが曲者で、種類が多い上に組み合わせないと意味がなかったり、組み合わせによって驚くべき効果を発揮したりする。

これらは名前や調べ方さえ知っていて、頭の中で結びついてくるほど素早くスタイリングが可能になる一方で、取っ掛かりがなければ非常に苦労するものだ。

なので、この書は索引とTIPSを始めとして、CSSを使う上で必要なことをできるだけ多く集めるつもりだ。


# [座学]CSSセレクター

なにをするにもCSSセレクターのチートシートは印刷して机の上に貼っておこう。本当に。

[CSS セレクター \- CSS: カスケーディングスタイルシート \| MDN](https://developer.mozilla.org/ja/docs/Web/CSS/CSS_Selectors)

[【初心者向け】CSSセレクタとは？セレクタの種類や指定方法を解説！（基礎編） : ビジネスとIT活用に役立つ情報](https://www.asobou.co.jp/blog/web/css-selectors)

[CSS セレクタ \| エンジニアのためのWebチートシート](https://web-cheatsheet.com/css-selector)

見た目が違う３種類にリンクしてみる。見やすいやつでよい。

|名称|記法|
|----|---|
|全称セレクタ|*|
|要素セレクタ|element|
|クラスセレクタ|.class|
|IDセレクタ|#id|
|属性セレクタ|[attr] [attr=value] [attr~=value] [attr|=value][attr^=value] [attr$=value] [attr*=value]|

|名称|記法|例|
|----|---|----|
|セレクターのグループ化|.A, .B| AクラスとBクラスのそれぞれに|
|両方をもつセレクタ|.A.B|両方をもつセレクタ|


|名称|記法|例|
|----|----|----|
|子孫結合子|div span| divの中にある全てのspan|
|子結合子|div > span|divの直下にある全てのspan|
|一般兄弟結合子|p ~ span|pの後ろにある（直後でなくてもかまわない） 両者が同じ親を持つspan|
|隣接兄弟結合子|h2 + p|h2の直後にある両者が同じ親を持つp全て|


[擬似クラス \- CSS: カスケーディングスタイルシート \| MDN](https://developer.mozilla.org/ja/docs/Web/CSS/Pseudo-classes)


# [座学]単位と計算

これとか参考になりそう
[相対単位と絶対単位｜いまさらHTML,CSS入門講座](https://homepagelecture.web.fc2.com/px_pt.html)

## 単位
### %
ボックスの幅（高さ）を基準として n %。
position: absolute とか設定されてると 100%が直近のposition: static以外の親要素の幅になる

また、フォントサイズの指定にも使える。この場合、親要素の font-size(計算済みのpx値)を100%として相対的な大きさになる。
親要素をfont-sizeを継承していくため、下記のようになる。

```
<div style="font-size: 16px">
 <p>16px</p>
 <div style="font-size: 120%">
   <p>16 x 1.2 = 19.2 px</p>
   <div style="font-size: 140%">
     <p>19.2px x 1.4 = 26.88px</p>
   </div>
 </div>

</div>
```


### em
親要素のfont-size(計算済みのpx値)を1として相対的な大きさになる
ネストして指定すると親要素の値を使うので、コントロールし辛い点も同様。
最近はあんまり使わないかもしれないけど見かけたらこれ。

### rem
html要素に降ってある font-size に対する相対値。
html要素が16pxであればそのページ内ではどこでも 1rem = 16px だし、 0.5rem = 8px といった具合。
この単位はfont-sizeだけではなく要素の幅や高さなどなどに使える。

html 要素のfont-sizeを変化させればrem単位の要素全てが変化するので、レスポンシブなデザインをするときに使用を考慮することもある。

[remを使ってCSSの文字サイズ指定 \| パソコン工房 NEXMAG](https://www.pc-koubou.jp/magazine/23912)


### `<number>`単位なし
line-heightは`<number>`単位なしだと font-size に`<number>`を掛けたものになる。
要するに line-height: 1 にしとけばfont-sizeに合わせて行間がほぼ無くなる。
既定値は 1.2前後らしい。
[line\-height \- CSS: カスケーディングスタイルシート \| MDN](https://developer.mozilla.org/ja/docs/Web/CSS/line-height)


### vw, vh
viewport（画面の幅、高さ） に対しての幅、高さを算出する。
親要素によらずデバイスの幅を参照するため、入れ子になった要素のスタイリングに便利で使いがちである。
100vhはアドレスバーとステータスバーを貫通するなど、モバイル端末で思いも寄らないレイアウト崩れのズレが出ることがあるのと、親要素の幅を無視するため筆者はあまり好みでない。

[【CSS】100vhは「一画面」ではないという罠 \| JavaScriptに関するお知らせ](https://jsnotice.com/posts/2019-03-30/)


## calc()

calc(100% - 24px) とかできる。四則演算がOK。
同じ単位でも、 **違う単位でもできるので大変便利**
*演算子の前後にスペースがないとシンタックスエラーになる*
[calc\(\) \- CSS: カスケーディングスタイルシート \| MDN](https://developer.mozilla.org/ja/docs/Web/CSS/calc())

### SASS(SCSS) の () との使い分け
SASS(SCSS)にも calc() みたいなやつがある。
こいつはプリコンパイル時に結果を確定させるので、同じ単位でないと動かないはず。

[四則演算 \| SASS・SCSS逆引き \| Webサイト制作支援 \| ShanaBrian Website](https://shanabrian.com/web/sass/4arithmetic-operations.php)

一方で、cssの calc() はブラウザでレンダリング時に計算されるので、パフォーマンスに影響が出るといえなくもない
（あまりにもたくさんの要素が動的に計算されていてレンダリングが遅いときは計測してみても良いだろう）


### SASS(SCSS) 変数を calc の中で使う
上述のリンク先にもあるが、 calc() の中はSASS(SCSS)コンパイラで処理しても基本的にはそのまま展開されるだけである。
事前に展開するには SCSS変数を展開するには `{$var}` のように {} でくくる必要がある。
[SCSSの変数と、CSS3のcalc\(\)を併用するには \- Qiita](https://qiita.com/mtmtkzm/items/2e3aef1b504ebcde5311)



# [座学]インライン要素とブロックレベル要素
HTML5的にはインライン要素とブロックレベル要素なんてものはないらしいが説明が簡単なのであえてこうする。

雑に言って、内容の幅で大きさが決まるのがインライン要素。他の要素と同じ行に収まることができる。

- img
- span
- i, b
- br
- a
- etc

四角いブロック（指定しなければ要素の中身の高さと親要素の幅を持つ）を生成するのがブロックレベル要素である。

- h1 〜 h6
- div
- p
- etc

## display プロパティ
```
display: block;
display: inline;
```
などのCSSでブロックレベルやインラインレベルの要素にレンダリングを変えることができるが、可読性や静的解析の観点でやるべきでない。

`display: flex` についてはどこかで後述する。



[ブロックレベル要素 \- HTML: HyperText Markup Language \| MDN](https://developer.mozilla.org/ja/docs/Web/HTML/Block-level_elements)




# flexboxで無移送する

flexboxとは
display: flex をつけるととりあずブロック要素として扱われる
直近の子要素の並び順を横方向に詰めれるだけ詰め、段落ちするという基本的な振る舞いがある？

display: flexといくつかのプロパティを使うとレイアウトが意のままに操れる

とりあえずチートシート登場


縦横中央揃え
display: flex;
justify-content: center;
align-items: center;

両端に揃え
display: flex;
justify-content: space-between;


# marginとpadding

## 横中央のマージン
margin-left:100%;
margin-right:100%;
width:100px;

### コンポーネントの外側にマージンはつけるな
コンポーネント単位で分けるという考え方が主流になってきたが、コンポーネントの外側にマージンをつけるべきではない。
これは、コンポーネントの外側のマージンは親コンポーネントにはめ込んだ時の見た目の事情で付けられることがほとんどだ。
このようなマージンを子コンポーネントに不用意につけてしまうと、別のところで使い回すときに意図しない隙間が空いてしまうことになる。
これは使う側(親コンポーネント)の責務なので、そちら側でマージンを適宜設定するようにしたい

## marginの相殺
margin-right: 20px;のボックスとmargin-left:10px;のボックスが左右に隣接するとどうなるか。
30pxと言いたいところだが実はマージンの相殺という処理が行われて20pxになる


#画像をいい感じに表示したいアレコレ

画像の横中央寄せ
display: block;
margin : 0 auto;


もしくはflexbix


画像の縦中央寄せ


画像のクリッピング
(IE11で動かないけど) object-fit 便利


# [座学]z-indexとコンテキストスタッキング(未完成

z-index だけで重なりが制御できると思った？残念！重ね合わせコンテキスト(Stacking Context)という概念と処理があります。
　
 
 どういうことかというと、z-index: 9999999; とかしても前に来ないものはこない！！！！

先祖要素に束縛するコンテキストがあるとそのコンテキストの中で比較されたあとに該当要素のz-indexが比較されるのです。

君は真に理解しているか？z-indexとスタッキングコンテキストの関係 - ICS MEDIA
https://ics.media/entry/200609/

この記事とか視覚的でわかりやすいかなあ


盲点はopacity: 0.9 以下だとコンテキストを作るとかかも

# 現代のHTMLとCSSの雛形は何を持つべきか、あるいはデザインガイ
iPhone対応で基本のフォントサイズは16pxを推奨
input要素やtextarea要素が16pxより小さいとフォーカス時にズームしてしまう
いずれかのreset cssを入れるべき

lang ja
文字コード

デザインガイドライン
iPhoneの場合下端45pxくらいはステータスバーにタッチ領域を吸われるのでボタンとか置かない


# CSSで作るメニューってカッコよくないですか
まぁJSでカパカパ動かしてもいいんですけれど
CSSの本なのでちょっと言及してみる

基本コンセプトは::mousehoverの活用すればよい


# borderとborder-radius


# 3点リーダーの処理

IE11を切っていいなら -webkit-line-clamp を使うのが楽
firefoxでも -webkit のベンダープレフィックスが必要だし、firefoxでも動く。
何より2行目から詰めるなどができる

IE11では text-overflow: elipsis をつかうのが一般的だけど、目的が1行のときにしか使えないし色々使い勝手が悪い

IE11に対応しないといけないならポリフィルを使うと言う手もあるので一考するとよい


# position: absolute

position: initial;以外の直近の先祖要素を基準点する。
ルートまでたどってposition: relative;などがなければウィンドウの端を基準点にとる

top/bottom、left/right のいずれか片方ずつ入れておけば、色々なものの端にくっつけたりできる。素敵

width: 100%; height: 100%;は基準点になってる要素の幅依存？要調査


# overflow: auto でスクロール可能な領域をつくる
ありがちだけどりメインコンテンツのエリアとして使うにはちょっと体験よくないかもしれない
ぐりぐりスクロールするとなんか反対方向にスクロールした時にすぐ戻らない。気のせい？

ともかく、高さ(横幅)が決まっていればoverflow-y(x) を auto にすればスクロールできる


# 開発者ツールのエレメントタブを使いこなす

右クリック→要素の検証を選ぶと開発者ツールのエレメントタブの当該のタグにフォーカスが当たる。便利

開発者ツールでは様々なことができる
たとえば右クリックでHtmlの書き換え、プロパティの追加、削除
Delでエレメントの削除とか

要素をフォーカスしてるときの適用スタイル一覧も便利
ここで細かい数値をいじって最後にファイルに反映すれば、1pxいじってみてファイルを保存して見た目の確認とかしなくてよくなる

ネットワークタブ
色々便利だけどcss的には関係ないから省略

# BEMとかFLOCUSへの雑感
コンポーネント化が進んだ現代ではいらんのとちゃう？

一応スコープのないCSSやSCSSを使う現場では有用な指針だけど、スコープがコンポーネントシステムに閉じられてるなら好き勝手しても他のコンポーネントに影響を与えないし命名規則に縛られてどんどんネストしていくよりよさそうよさそう。


# レスポンシブデザインの苦悩

つらい

基本的にはメディアクエリでレイアウトを切り替えると思う

ウィンドウサイズをJSで取得してそれに応じたサイズで出すのもあり。
個人的には初回画面を表示したときのサイズで判定で十分だと思う。
画面をリサイズしたときの挙動が〜とかいうとリサイズイベントの監視でパフォーマンスに影響が出る場合がある。

# 困ったときにどこをみるか、デバッグの方法

## 思った通りにならないやーつ

スタックトレースみる
一番直近のやつがライブラリのコードだとひても、そのコールスタックを遡っていくと自分の書いたコードにあたることもある

console.logとか吐いてるとそこへ飛べる

debuggerは開発者ツールをひらいていればそこを通ったときにとまる(コードに書けるブレークポイント

# CSS プロパティリファレンス

マダナニモナイ
